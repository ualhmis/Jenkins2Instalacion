<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.17">
<meta name="keywords" content="Jenkins">
<meta name="author" content="Herramientas y Métodos de Ingeniería del Software">
<title>Instalación de Jenkins en Ubuntu 22.04, 20.04, 18.04 LTS con Certbot SSL</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.square li ul,ul.circle li ul,ul.disc li ul{list-style:inherit}
ul.square{list-style-type:square}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child,body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.exampleblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child{margin-bottom:0}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>:first-child{margin-top:0}
.sidebarblock>:last-child{margin-bottom:0}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="book toc2 toc-right doc">
<div id="header">
<h1>Instalación de Jenkins en Ubuntu 22.04, 20.04, 18.04 LTS con Certbot SSL</h1>
<div class="details">
<span id="author" class="author">Herramientas y Métodos de Ingeniería del Software</span><br>
<span id="revnumber">version 3.0,</span>
<span id="revdate">Febrero-2024</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Tabla de contenidos</div>
<ul class="sectlevel0">
<li><a href="#_prerrequisitos">Prerrequisitos</a>
<ul class="sectlevel1">
<li><a href="#_creación_de_una_máquina_virtual_para_jenkins">1. Creación de una máquina virtual para Jenkins</a></li>
<li><a href="#_actualización_del_sistema">2. Actualización del sistema</a></li>
<li><a href="#_instalar_java">3. Instalar Java</a>
<ul class="sectlevel2">
<li><a href="#_definiendo_la_variable_de_entorno_java_home">3.1. Definiendo la Variable de Entorno <code>JAVA_HOME</code></a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_instalación_de_jenkins">Instalación de Jenkins</a>
<ul class="sectlevel1">
<li><a href="#_instalación_de_jenkins_mediante_paquetes">4. Instalación de Jenkins mediante paquetes</a></li>
<li><a href="#_instalación_de_nginx_como_proxy_inverso">5. Instalación de Nginx como Proxy Inverso</a></li>
<li><a href="#_instalación_de_lets_encrypt_ssl_optativo">6. Instalación de Let’s Encrypt SSL (optativo)</a></li>
</ul>
</li>
<li><a href="#_configuración_de_jenkins_2">Configuración de Jenkins 2</a>
<ul class="sectlevel1">
<li><a href="#_primera_configuración_de_jenkins">7. Primera configuración de Jenkins</a></li>
<li><a href="#_securizando_jenkins">8. Securizando Jenkins</a></li>
<li><a href="#_probando_un_primer_proyecto">9. Probando un primer proyecto</a></li>
<li><a href="#_configuración_de_herramientas">10. Configuración de herramientas</a>
<ul class="sectlevel2">
<li><a href="#_jdk">10.1. JDK</a></li>
<li><a href="#_git">10.2. Git</a></li>
<li><a href="#_ant">10.3. Ant</a></li>
<li><a href="#_maven">10.4. Maven</a></li>
</ul>
</li>
<li><a href="#_instalación_de_plugins">11. Instalación de plugins</a></li>
<li><a href="#_configuración_adicional_opcional">12. Configuración Adicional (opcional)</a>
<ul class="sectlevel2">
<li><a href="#_configuración_de_gitlab">12.1. Configuración de GitLab</a></li>
<li><a href="#_configuración_de_sonarqube">12.2. Configuración de SonarQube</a></li>
</ul>
</li>
<li><a href="#_actualización">13. Actualización</a>
<ul class="sectlevel2">
<li><a href="#_actualización_de_jenkins">13.1. Actualización de Jenkins</a></li>
<li><a href="#_actualización_de_plugins">13.2. Actualización de plugins</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#_bibliografía">Bibliografía</a>
<ul class="sectlevel1">
<li><a href="#_referencias">Referencias</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Joaquín Cañadas &lt;<a href="mailto:jjcanada@ual.es">jjcanada@ual.es</a>&gt;</p>
</div>
<div class="quoteblock abstract">
<blockquote>
Tutorial de instalación de Jenkins en Ubuntu 20.04, 18.04 LTS con Certbot SSL.
</blockquote>
</div>
<div class="ulist">
<div class="title">Objetivos</div>
<ul>
<li>
<p>Actualizar el sistema Ubuntu 22.04, 20.04, 18.04 en caso de que sea necesario</p>
</li>
<li>
<p>Instalar Jenkins (última versión)</p>
</li>
<li>
<p>Configurar Nginx como proxy inverso</p>
</li>
<li>
<p>Instalar certificado SSL con Certbot</p>
</li>
<li>
<p>Primeros pasos en Jenkins: configuración básica y plugins</p>
</li>
</ul>
</div>
</div>
</div>
<h1 id="_prerrequisitos" class="sect0">Prerrequisitos</h1>
<div class="sect1">
<h2 id="_creación_de_una_máquina_virtual_para_jenkins">1. Creación de una máquina virtual para Jenkins</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Debes disponer de una máquina virtual en la nube para la instalación de Jenkins. Sigue los pasos que conoces para crear una máquina virtual.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_actualización_del_sistema">2. Actualización del sistema</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Actualiza los paquetes</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo apt-get update -y
sudo apt-get upgrade -y</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si aparece el mensaje <code>*** System restart required ***</code>
ejecutar</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo reboot -h now</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture1.png" alt="Reiniciar el sistema">
</div>
<div class="title">Fig. 1. Reiniciar el sistema</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_instalar_java">3. Instalar Java</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Puede instalar el JDK con el siguiente comando, es importante instalar al menos la versión 1.8 del JDK, si no Jenkins no funcionará. Aunque ya recomienda usar <a href="https://www.jenkins.io/doc/administration/requirements/upgrade-java-guidelines/" target="_blank" rel="noopener">Java 17</a></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo apt install openjdk-17-jdk -y</code></pre>
</div>
</div>
<div class="paragraph">
<p>Primero comprobaremos si la versión activa de Java es la 17.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">java -version</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/java-version-17.png" alt="java -version">
</div>
</div>
<div class="paragraph">
<p>En caso contrario podemos comprobar si hay varias instalaciones de Java en el servidor y elegir la pertinente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo update-alternatives --config java</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/java-alternatives-17.png" alt="java -alternatives">
</div>
</div>
<div class="sect2">
<h3 id="_definiendo_la_variable_de_entorno_java_home">3.1. Definiendo la Variable de Entorno <code>JAVA_HOME</code></h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo nano /etc/environment</code></pre>
</div>
</div>
<div class="paragraph">
<p>Al final de este archivo, agregue la siguiente línea, asegurándose de sustituir la ruta resaltada con la  ruta de jdk en su sistema.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-conf" data-lang="conf">JAVA_HOME="/usr/lib/jvm/java-17-openjdk-amd64"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Guarde, salga del archivo y vuelva a cargarlo.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">source /etc/environment</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ahora puede probar si la variable de entorno se ha establecido mediante la ejecución del siguiente comando:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">echo $JAVA_HOME</code></pre>
</div>
</div>
<div class="paragraph">
<p>Esto devolverá la ruta que acaba de establecer.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>/usr/lib/jvm/java-17-openjdk-amd64</pre>
</div>
</div>
</div>
</div>
</div>
<h1 id="_instalación_de_jenkins" class="sect0">Instalación de Jenkins</h1>
<div class="sect1">
<h2 id="_instalación_de_jenkins_mediante_paquetes">4. Instalación de Jenkins mediante paquetes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Instalaremos Jenkins en un sistema operativo basado en Ubuntu 22.04 LTS, 20.04 LTS o 18.04 LTS. La instalación consiste en añadir los repositorios de Jenkins, actualizar nuestro sistema de repositorios y una vez acabado, instalar Jenkins.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Como prerrequisito es necesario tener instalado Java. Compruebe que está configurado JAVA_HOME
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Instalaremos Jenkins de la rama estable (versión Long-Term Support, LTS). Hay que tener en cuenta que esta versión de Jenkins se actualiza cada 12 semanas. Si queréis más información sobre la versión LTS de Jenkins, os dejo el enlace <a href="https://www.jenkins.io/download/lts/">aqui</a>.</p>
</div>
<div class="paragraph">
<p>Lo primero que haremos es añadir los repositorios de Jenkins e instalarlo mediante apt-get:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo wget -O /usr/share/keyrings/jenkins-keyring.asc \
    https://pkg.jenkins.io/debian-stable/jenkins.io-2023.key</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">echo deb [signed-by=/usr/share/keyrings/jenkins-keyring.asc] \
    https://pkg.jenkins.io/debian-stable binary/ | sudo tee \
    /etc/apt/sources.list.d/jenkins.list &gt; /dev/null</code></pre>
</div>
</div>
<div class="paragraph">
<p>Actualiza e instala.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo apt-get update -y</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo apt-get install jenkins -y</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>En caso de que no se pueda instalar Jenkins, revise si el comando ha sido actualizado en los pasos de <a href="https://www.jenkins.io/doc/book/installing/linux/#debianubuntu">instalación de Jenkins en Ubuntu</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A continuación, comprueba el estado del servicio:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo systemctl status jenkins</code></pre>
</div>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/estado-servicio-jenkins.png" alt="estado servicio jenkins" width="100%">
</div>
<div class="title">Fig. 2. Estado del servicio Jenkins</div>
</div>
<div class="paragraph">
<p>En caso de que no esté activo, levantamos el servicio:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo systemctl start jenkins</code></pre>
</div>
</div>
<div class="paragraph">
<p>Debido a que <code>systemctl</code> no muestra un resultado de estado, utilizaremos el comando <code>status</code> para verificar que Jenkins se haya iniciado de forma correcta:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo systemctl status jenkins</code></pre>
</div>
</div>
<div class="paragraph">
<p>Si todo salió bien, mostrará que el servicio está <strong>activo</strong>.</p>
</div>
<div class="paragraph">
<p>Y comprobamos también que Jenkins está funcionando en el puerto 8080</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo netstat -plntu</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture4.png" alt="Listado puertos activos">
</div>
<div class="title">Fig. 3. Listado puertos activos</div>
</div>
<div class="paragraph">
<p>Una vez realizada la instalación por defecto Jenkins estará escuchando en el puerto 8080. Podemos comprobarlo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">curl localhost:8080</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture5.png" alt="Respuesta de Jenkins en el 8080">
</div>
<div class="title">Fig. 4. Respuesta de Jenkins en el 8080</div>
</div>
<div class="paragraph">
<p>Jenkins se está ejecutando en el puerto 8080. Necesitamos instalar un Apache o Nginx en modo <strong>Reverse Proxy</strong> para poder acceder a la administración de Jenkins mediante el puerto 80 (HTTP).</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_instalación_de_nginx_como_proxy_inverso">5. Instalación de Nginx como Proxy Inverso</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Instalamos Nginx y lo configuramos para que actúe como proxy inverso: Nginx recibe las peticiones en el puerto 80 y las redirige al 8080 donde escucha Jenkins.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo apt install nginx -y</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comprobamos que Nginx está funcionando en el puerto 80: abre el navegador, introduce la dirección IP de tu máquina virtual y verás la página de bienvenida de Nginx.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/nginx-home.png" alt="Nginx homepage">
</div>
</div>
<div class="paragraph">
<p>Creamos un nuevo archivo de configuración para Jenkins, sustituyendo <em>JENKINS.MACHINE.DNS</em> por la DNS generada en AZURE de la máquina Jenkins:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo nano /etc/nginx/sites-available/JENKINS.MACHINE.DNS</code></pre>
</div>
</div>
<div class="paragraph">
<p>El contendido debe ser el siguiente, sustituyendo el texto <em>JENKINS.MACHINE.DNS</em> por la DNS generada en AZURE de la máquina (sin http delante, solo el nombre de DNS):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-conf" data-lang="conf"> server {
    listen [::]:80;
    listen 80;

    server_name JENKINS.MACHINE.DNS; <i class="conum" data-value="1"></i><b>(1)</b>

    location / {
        proxy_set_header        Host $host:$server_port;
        proxy_set_header        X-Real-IP $remote_addr;
        proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header        X-Forwarded-Proto $scheme;

        proxy_pass          http://127.0.0.1:8080;
        proxy_read_timeout  90;

        proxy_redirect      http://127.0.0.1:8080 https://JENKINS.MACHINE.DNS; <i class="conum" data-value="2"></i><b>(2)</b>

        proxy_http_version 1.1;
        proxy_request_buffering off;
        add_header 'X-SSH-Endpoint' 'JENKINS.MACHINE.DNS:50022' always; <i class="conum" data-value="3"></i><b>(3)</b>
    }
}</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Recuerda sustituir <code>JENKINS.MACHINE.DNS</code> por el DNS de la máquina virtual en Azure donde has instalado Jenkins.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Idem</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Idem</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Se recomienda copiar el texto y editarlo en local con Notepad++ o cualquier otro editor, para hacer la búsqueda y reemplazo de <code>JENKINS.MACHINE.DNS</code> por el DNS de la máquina virtual. Tras ello, copia y pega el texto definitivo en el archivo abierto con <em>nano</em> en el terminal SSH.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Tenemos que configurar Nginx para que use el archivo de configuración que acabamos de crear, así que eliminamos la configuración predeterminada:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo rm -rf /etc/nginx/sites-available/default</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo rm -rf /etc/nginx/sites-enabled/default</code></pre>
</div>
</div>
<div class="paragraph">
<p>A continuación, creamos un enlace simbólico `default`a la nueva configuración de Nginx:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo ln -s /etc/nginx/sites-available/JENKINS.MACHINE.DNS /etc/nginx/sites-enabled/default</code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Recuerda sustituir <code>JENKINS.MACHINE.DNS</code> por el DNS de la máquina virtual en Azure.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Para que Jenkins trabaje con Nginx, necesitamos hacer que Jenkins escuche en <code>localhost</code>. Para ello, editamos el archivo <code>/etc/default/jenkins</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo nano /etc/default/jenkins</code></pre>
</div>
</div>
<div class="paragraph">
<p>Busca la linea <code>JENKINS_ARGS</code> (última línea del archivo) y añade al final en la lista de argumentos <code>--httpListenAddress=127.0.0.1</code>.</p>
</div>
<div class="paragraph">
<p>La linea quedaría así:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-conf" data-lang="conf">JENKINS_ARGS="--webroot=/var/cache/$NAME/war --httpPort=$HTTP_PORT --httpListenAddress=127.0.0.1"</code></pre>
</div>
</div>
<div class="paragraph">
<p>Reiniciamos Jenkins</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo systemctl restart jenkins</code></pre>
</div>
</div>
<div class="paragraph">
<p>Comprueba la configuración y reinicia Nginx:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo nginx -t
sudo service nginx restart</code></pre>
</div>
</div>
<div class="paragraph">
<p>Y por último, comprobamos que los puertos 80 y 8080 están usados por Nginx y Jenkins, respectivamente.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">netstat -plntu</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture8.png" alt="Listado de puertos activos: 80 y 8080">
</div>
<div class="title">Fig. 5. Listado de puertos activos: 80 y 8080</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_instalación_de_lets_encrypt_ssl_optativo">6. Instalación de Let’s Encrypt SSL (optativo)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Certbot by Let’s Encrypt proporciona certificados SSL gratuitos, permitiendo que cualquiera pueda usar HTTPS.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo apt-get install python3-certbot-nginx -y</code></pre>
</div>
</div>
<div class="paragraph">
<p>Ahora que has instalado Certbot by Let’s Encrypt para Ubuntu, ejecuta el siguiente comando para recibir tus certificados:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo certbot --nginx certonly</code></pre>
</div>
</div>
<div class="paragraph">
<p>Introduce un correo electrónico y acepta los términos y condiciones (Y), no compartas tu email (N), luego recibirás la lista de dominios que necesita para generar el certificado SSL. Para seleccionar todos los dominios simplemente presiona Enter para dejar en blanco.</p>
</div>
<div class="paragraph">
<p>El cliente de Certbot generará automáticamente el nuevo certificado para tu dominio.</p>
</div>
<div class="imageblock text-center thumb">
<div class="content">
<img src="images/certificados-generados-ok.png" alt="certificados generados ok" width="100%">
</div>
<div class="title">Fig. 6. Certificados generados correctamente</div>
</div>
<div class="paragraph">
<p>Ahora necesitamos actualizar la configuración de Nginx.</p>
</div>
<div class="paragraph">
<p>Una vez que se instala SSL, puede configurarlo en su archivo Nginx.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo nano /etc/nginx/sites-available/JENKINS.MACHINE.DNS</code></pre>
</div>
</div>
<div class="paragraph">
<p>Borra todo el contenido y añade el siguiente:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-conf" data-lang="conf">server {
     listen [::]:80;
     listen 80;

     server_name JENKINS.MACHINE.DNS; <i class="conum" data-value="1"></i><b>(1)</b>

     return 301 https://JENKINS.MACHINE.DNS$request_uri; <i class="conum" data-value="1"></i><b>(1)</b>
 }

 server {
     listen [::]:443 ssl;
     listen 443 ssl;

     server_name JENKINS.MACHINE.DNS; <i class="conum" data-value="1"></i><b>(1)</b>

     ssl_certificate /etc/letsencrypt/live/JENKINS.MACHINE.DNS/fullchain.pem; <i class="conum" data-value="1"></i><b>(1)</b>
     ssl_certificate_key /etc/letsencrypt/live/JENKINS.MACHINE.DNS/privkey.pem; <i class="conum" data-value="1"></i><b>(1)</b>

     location / {
         proxy_set_header        Host $host:$server_port;
         proxy_set_header        X-Real-IP $remote_addr;
         proxy_set_header        X-Forwarded-For $proxy_add_x_forwarded_for;
         proxy_set_header        X-Forwarded-Proto $scheme;
         proxy_pass          http://127.0.0.1:8080;
         proxy_read_timeout  90;
         proxy_redirect      http://127.0.0.1:8080 https://JENKINS.MACHINE.DNS; <i class="conum" data-value="1"></i><b>(1)</b>

         proxy_http_version 1.1;
         proxy_request_buffering off;
         add_header 'X-SSH-Endpoint' 'JENKINS.MACHINE.DNS:50022' always; <i class="conum" data-value="1"></i><b>(1)</b>
     }
 }</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Recuerda sustituir <code>JENKINS.MACHINE.DNS</code> por el DNS de la máquina virtual en Azure donde has instalado Jenkins.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>De nuevo, comprueba la configuración y reinicia Nginx para que los cambios tengan efecto:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo nginx -t
sudo service nginx restart</code></pre>
</div>
</div>
<div class="paragraph">
<p>Y comprueba los puertos abiertos en tu máquina:</p>
</div>
<div class="paragraph">
<p>Y por último, comprobamos que los puertos 80 y 8080 están usados por Nginx y Jenkins, respectivamente.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo netstat -plntu</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/ssl-ok.png" alt="Listado de puertos activos 80" width="443 y 8080">
</div>
<div class="title">Fig. 7. Listado de puertos activos 80, 443 y 8080</div>
</div>
<div class="paragraph">
<p><strong>Renovación del certificado SSL</strong></p>
</div>
<div class="paragraph">
<p>Los certificados que proporciona  Let’s Encrypt son válidos solo por <strong>90 días</strong>, por lo que deberás renovarlos al menos una vez durante el curso. A continuación, vamos a configurar un <code>cronjob</code> para verificar si el certificado vencerá en los próximos 30 días y renovarlo automáticamente.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo crontab -e</code></pre>
</div>
</div>
<div class="paragraph">
<p>Añade esta linea al final del archivo</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-conf" data-lang="conf">0 0 1 * * certbot renew &gt;/dev/null 2&gt;&amp;1</code></pre>
</div>
</div>
<div class="paragraph">
<p>Eso consigue que se renueve el certificado a las 0h del dia 1 de cada mes.</p>
</div>
<div class="paragraph">
<p>Eso es todo, ahora puedes visitar su nombre de dominio en el navegador web. Puedes ver la página de Jenkins con HTTPS.</p>
</div>
</div>
</div>
<h1 id="_configuración_de_jenkins_2" class="sect0">Configuración de Jenkins 2</h1>
<div class="sect1">
<h2 id="_primera_configuración_de_jenkins">7. Primera configuración de Jenkins</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Antes de realizar la primera configuración necesitaremos saber el password temporal de admin que Jenkins ha generado para poder empezar a configurarlo:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo cat /var/lib/jenkins/secrets/initialAdminPassword</code></pre>
</div>
</div>
<div class="paragraph">
<p>Copiamos el password y lo pegamos en la siguiente pantalla, y hacemos click en <b class="button">Continuar</b></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture9.png" alt="Unlock Jenkins">
</div>
</div>
<div class="paragraph">
<p>Seguidamente instalaremos los plugins más comunes. No os preocupéis que posteriormente instalaremos varios plugins más, de hecho una de las grandes ventajas que tiene Jenkins es la gran cantidad de plugins que hay.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture10.png" alt="Install suggested plugins">
</div>
</div>
<div class="paragraph">
<p>Tras hacer clic en <strong>Install suggested plugins</strong>, el proceso de instalación de plugins tardará unos minutos:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture11.png" alt="Jenkins plugins installations in progress">
</div>
</div>
<div class="paragraph">
<p>Seguidamente nos solicitará un usuario y una contraseña de <strong>admin</strong>, el cual usaremos posteriormente poder acceder a la administración de Jenkins:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture12.png" alt="Create first Admin user">
</div>
</div>
<div class="paragraph">
<p>Pulsamos el botón <b class="button">Save and Finish</b></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture13.png" alt="Jenkins is ready">
</div>
</div>
<div class="paragraph">
<p>Ya podemos acceder a Jenkins introduciendo el usuario y contraseña que acabamos de crear.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture14.png" alt="Bienvenido a Jenkins">
</div>
<div class="title">Fig. 8. Bienvenido a Jenkins</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_securizando_jenkins">8. Securizando Jenkins</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Las versiones anteriores de Jenkins (v1.x) se instalaban sin ningún tipo de control de acceso para los usuarios. Esto implicaba que cualquier usuario podía usar la aplicación, lo que era totalmente desaconsejable. Por ello, lo primero era activar la seguridad. La versión actual (v2.x) activa la autenticación de forma predeterminada, creando un usuario Admin con el que hemos hecho el primer acceso. Pero sigue siendo necesario configurar la seguridad para poder gestionar el acceso a nuevos usuarios. Para ello, hacemos clic en <strong>Administrar Jenkins</strong> / <strong>Security</strong>.</p>
</div>
<div class="paragraph">
<p>Jenkins permite diversos <strong>modos de acceso</strong>. Vamos a configurar el más básico que es el de <strong>Usar base de datos de Jenkins</strong>, y marcamos <strong>Permitir que los usuarios se registren</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/security-permitir-usuarios-se-registren.png" alt="Permitir que los usuarios se registren">
</div>
<div class="title">Fig. 9. Permitir que los usuarios se registren</div>
</div>
<div class="paragraph">
<p>Justo abajo, en la sección <strong>Autorización</strong>, marcamos <strong>Configuración de seguridad</strong>. En el campo de texto debemos escribir el nombre del usuario admin con el que hemos accedido, y a continuación hacer clic en el botón <b class="button">Añadir</b>. Tras ello, debemos marcarlo como <strong>Administer</strong>. Y por último <b class="button">Guardar</b></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture16.png" alt="Autorización. Configuración de seguridad">
</div>
<div class="title">Fig. 10. Autorización. Configuración de seguridad. Añadir al usuario <code>Administer</code></div>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="title">Qué hacer si nos hemos bloqueado y no podemos acceder</div>
<div class="paragraph">
<p>En caso de emergencia, si olvidamos la contraseña o no podemos acceder a Jenkins, debemos seguir las instrucciones definidas aquí: <a href="https://www.jenkins.io/doc/book/security/access-control/disable/">Help! I locked myself out!. Disable Access Control</a>.</p>
</div>
<div class="paragraph">
<p>Más info en <a href="https://wiki.jenkins-ci.org/display/JENKINS/Securing+Jenkins">Securing Jenkins</a></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Podemos registrar nuevos usuarios mediante el formulario de registro de la página inicial (no estando logueados). Cada miembro del equipo debe registrarse como usuario. Mediante el usuario administrador damos permisos a los nuevos usuarios registrados.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="title">Control de acceso con LDAP</div>
<div class="paragraph">
<p>El método de acceso más recomendable sería tener un sistema LDAP para el equipo, y que la validación de todas las herramientas (GitLab, Jenkins, etc) se realizase contra el LDAP (esto se podría implementar con, por ejemplo, <a href="https://www.openldap.org/">OpenLDAP</a>).</p>
</div>
<div class="paragraph">
<p>Más info:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://wiki.jenkins-ci.org/display/JENKINS/Standard+Security+Setup">Jenkins standard security setup</a></p>
</li>
<li>
<p><a href="https://wiki.jenkins-ci.org/display/JENKINS/LDAP+Plugin">LDAP plugin</a></p>
</li>
</ul>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_probando_un_primer_proyecto">9. Probando un primer proyecto</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Desde la página inicial de Jenkins, clic en <strong>Nueva Tarea</strong> (<em>Create new Job</em>)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Nueva_Tarea.png" alt="Nueva Tarea">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Nombre: <strong>prueba de sistema</strong></p>
</li>
<li>
<p>Seleccionar: <strong>Crear un proyecto estilo libre</strong></p>
</li>
<li>
<p><b class="button">Ok</b></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture17.png" alt="Selección tipo de Tarea">
</div>
</div>
<div class="paragraph">
<p>Entramos en la configuración del nuevo proyecto. Seleccionamos la sección  <strong>Build steps</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Seleccionamos el botón <strong>Añadir un nuevo paso</strong></p>
</li>
<li>
<p>Seleccionamos <strong>Ejecutar línea de comandos (shell)</strong></p>
</li>
<li>
<p>En comando escribimos</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">top -b -n 1 | head -n 5</code></pre>
</div>
</div>
</li>
<li>
<p>Pulsamos <strong>Guardar</strong></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/new-job-prueba-ejecutar-shell.png" alt="Configuración proyecto básico">
</div>
<div class="title">Fig. 11. Configuración proyecto básico</div>
</div>
<div class="paragraph">
<p>Tras ello hacemos clic en <strong>Construir ahora</strong> (<em>Build now</em>)</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/menu_build_now.png" alt="Construir ahora">
</div>
</div>
<div class="paragraph">
<p>Tras la ejecución del proyecto, se puede ver el <strong>Historial de tareas</strong>, hacemos clic en la bolita azul de la primera ejecución y nos mostrará la <strong>Salida de Consola</strong>. Ahí podemos ver el resultado de la ejecución de este proyecto de prueba en Jenkins.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture20.png" alt="Bolita azul para ver la Salida consola">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture21.png" alt="Salida consola del primer ejemplo">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuración_de_herramientas">10. Configuración de herramientas</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Jenkins hace uso de diversas herramientas a las que invoca a la hora de realizar tareas en la construcción de los proyectos. Estas herramientas deben ser instaladas y configuradas. Para ello vamos a <strong>Administrar Jenkins</strong> / <strong>Global Tools configuration</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture22.png" alt="Global Tools Configuration">
</div>
</div>
<div class="sect2">
<h3 id="_jdk">10.1. JDK</h3>
<div class="ulist">
<ul>
<li>
<p><b class="button">Añadir JDK</b></p>
</li>
<li>
<p>Nombre: <strong>OpenJDK-11</strong></p>
</li>
<li>
<p>JAVA_HOME: <strong>/usr/lib/jvm/java-11-openjdk-amd64/</strong></p>
<div class="imageblock">
<div class="content">
<img src="images/Picture23.png" alt="Instalación de JDK">
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_git">10.2. Git</h3>
<div class="ulist">
<ul>
<li>
<p><b class="button">Añadir Git</b></p>
</li>
<li>
<p>Nombre: <strong>Default</strong></p>
</li>
<li>
<p>Path: <strong>git</strong></p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Suponemos que git ya está instalado previamente en la máquina. En caso contrario instalarlo desde el terminal</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo apt-get install git</code></pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_ant">10.3. Ant</h3>
<div class="ulist">
<ul>
<li>
<p><b class="button">Instalaciones de Ant&#8230;&#8203;</b> / <b class="button">Añadir Ant</b></p>
</li>
<li>
<p>Nombre: <strong>ant 1.10.12</strong></p>
</li>
<li>
<p>Marcar <strong>Instalar automáticamente</strong></p>
</li>
<li>
<p>Version: <strong>1.10.12</strong></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture24.png" alt="Instalación de Ant">
</div>
</div>
</div>
<div class="sect2">
<h3 id="_maven">10.4. Maven</h3>
<div class="ulist">
<ul>
<li>
<p><b class="button">Instalaciones de Maven&#8230;&#8203;</b> / <b class="button">Añadir Maven</b></p>
</li>
<li>
<p>Nombre: <strong>maven default</strong></p>
</li>
<li>
<p>Marcar <strong>Instalar automáticamente</strong></p>
</li>
<li>
<p>Version: <strong>la última versión disponible</strong></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture25.png" alt="Instalación de Maven">
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Seleccionamos la ultima versión de Maven disponible en el desplegable. (La 3.5.0 da muchos problemas!)</p>
</div>
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>En caso de que no esté disponible la configuración de instalaciones de Maven, este paso deberá hacerse una vez realizada la instalación del plugin de Maven.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_instalación_de_plugins">11. Instalación de plugins</h2>
<div class="sectionbody">
<div class="paragraph">
<p>La gestión de los plugins se realiza desde <strong>Administrar Jenkins</strong> / <strong>Administrar plugins</strong>.</p>
</div>
<div class="paragraph">
<p>En la pestaña <strong>Actualizaciones disponibles</strong> (<em>Update</em>) debemos marcar todos los que se muestren y mantenerlos actualizados.</p>
</div>
<div class="paragraph">
<p>La pestaña <strong>Todos los plugins</strong> (<em>Available</em>) muestra la lista de todos los plugins que no tenemos instalados. De ella tenemos que seleccionar los siguientes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Maven integration plugin</p>
<div class="imageblock">
<div class="content">
<img src="images/Picture26.png" alt="Maven plugin">
</div>
</div>
</li>
<li>
<p>Cobertura plugin</p>
<div class="imageblock">
<div class="content">
<img src="images/Picture27.png" alt="Cobertura plugin">
</div>
</div>
</li>
<li>
<p>JaCoCo (Java Code Coverage)</p>
<div class="imageblock">
<div class="content">
<img src="images/Picture28.png" alt="JaCoCo plugin">
</div>
</div>
</li>
<li>
<p>GitLab</p>
<div class="imageblock">
<div class="content">
<img src="images/Picture29.png" alt="GitLab plugin">
</div>
</div>
</li>
<li>
<p>SonarQube</p>
<div class="imageblock">
<div class="content">
<img src="images/Picture32.png" alt="Sonar plugin">
</div>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>Tras ello, hacemos clic en <strong>Descargar ahora e instalar después de reiniciar</strong>. Y marcamos <strong>Reiniciar Jenkins después de la instalación</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture30.png" alt="Descargar plugins">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_configuración_adicional_opcional">12. Configuración Adicional (opcional)</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Opcionalmente, puede ser necesario realizar alguna configuración adicional. Por ejemplo si queremos construir aplicaciones PHP con Phing debemos instalar el plugin de Phing en Jenkins, así como instalar Phing en la máquina.</p>
</div>
<div class="paragraph">
<p>Recuerda que hay infinidad de plugins en Jenkins, y si quieres usar alguno de ellos solo tienes que instalarlo. Existe numerosa documentación de Jenkins en la web.</p>
</div>
<div class="paragraph">
<p>En caso de duda -&#8594; <em>Stackoverflow</em> ;-)</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Las siguientes secciones pueden estar desactualizadas. Si los pasos no son exactamente iguales en la versión actual de Jenkins, busca en internet ayuda para realizar la configuración de GitLab y SonarQube indicada.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_configuración_de_gitlab">12.1. Configuración de GitLab</h3>
<div class="paragraph">
<p>Si queréis usar vuestro propio GitLab con Jenkins, tendréis que hacer una configuración de GitLab indicando la URL y el API Token. El API Token es un valor ligado al usuario de GitLab disponible en <strong>User Settings</strong> / <strong>Account</strong>:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gitlab-token.png" alt="GitLab token">
</div>
</div>
<div class="paragraph">
<p>A continuación, en Jenkins, introducimos la configuración del servidor Gitlab: <strong>Administrar Jenkins</strong> / <strong>Configurar sistema</strong>. Al  final de la página encontrarás la sección de GitLab.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture31.png" alt="Gitlab Configuration">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Nombre de la conexión: <em>mi gitlab</em></p>
</li>
<li>
<p>Gitlab Host URL: http://<em>mi_IP_gitlab</em></p>
</li>
<li>
<p>Credenciales: <strong>Añadir</strong></p>
<div class="ulist">
<ul>
<li>
<p>Tipo: <strong>GitLab API token</strong></p>
</li>
<li>
<p>API token: <em>mi token</em></p>
</li>
<li>
<p>ID: <em>mi-gitlab</em></p>
</li>
<li>
<p>Descripción: <em>token de mi gitlab</em></p>
<div class="imageblock">
<div class="content">
<img src="images/gitlab-api-token-credential.png" alt="Credencial GitLab API token">
</div>
</div>
<div class="paragraph">
<p>Tras ello seleccionamos la credencial:</p>
</div>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/gitlab-api-token-ok.png" alt="Credencial GitLab API token">
</div>
</div>
<div class="paragraph">
<p>En un proximo tutorial veremos como usar un repositorio GitLab en un proyecto Jenkins.</p>
</div>
</div>
<div class="sect2">
<h3 id="_configuración_de_sonarqube">12.2. Configuración de SonarQube</h3>
<div class="paragraph">
<p>SonarQube es una plataforma de calidad de código fuente. SonarQube proporciona diversas herramientas de análisis estático de código fuente como Checkstyle, PMD o FindBugs para obtener métricas que pueden ayudar a mejorar la calidad del código de un programa.</p>
</div>
<div class="paragraph">
<p>Primero hemos de instalar el plugin de Sonar y luego configurarlo.
* Instalación del plugin <strong>SonarQube Scanner for Jenkins</strong></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture32.png" alt="SonarQube plugin">
</div>
</div>
<div class="paragraph">
<p>A continuación, <strong>Administrar Jenkins</strong> / <strong>Global Tool Configuration</strong>.
Descender en la página a la sección de configuración <strong>SonarQube Scanner</strong>, y:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Hacer clic <strong>Añadir SonarQube Scanner</strong></p>
</li>
<li>
<p>Seleccionar <strong>Instalar Automáticamente</strong></p>
</li>
<li>
<p>Nombre: <strong>SonarQube scanner 3.x.x</strong></p>
</li>
<li>
<p>Version: <em>la última disponible</em></p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/Picture33.png" alt="Configuración de SonarQube scanner tool">
</div>
</div>
<div class="paragraph">
<p>Se debe crear un token de autenticación desde el servidor SonarQube, creado como una credencial 'Secret Text'. Si aun no dispone de un servidor SonarQube, déjelo en blanco.</p>
</div>
<div class="paragraph">
<p>Por último guardar la configuración.</p>
</div>
<div class="paragraph">
<p>Más info: <a href="https://docs.sonarqube.org/display/SCAN/Analyzing+with+SonarQube+Scanner+for+Jenkins">SonarQube Scanner for Jenkins</a></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_actualización">13. Actualización</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_actualización_de_jenkins">13.1. Actualización de Jenkins</h3>
<div class="paragraph">
<p>Si al iniciar Jenkins como administradores nos aparece un mensaje indicando que una nueva versión de Jenkins está disponible, es <strong>aconsejable actualizar siempre</strong>.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/new-version.png" alt="Disponible nueva version de Jenkins">
</div>
</div>
<div class="paragraph">
<p>Para ello:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Administrar Jenkins / Prepare for Shutdown</p>
</li>
</ul>
</div>
<div class="imageblock">
<div class="content">
<img src="images/prepare-for-shutdown.png" alt="Prepare for shutdown&#8230;&#8203;">
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Desde la consola ssh:</p>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-bash" data-lang="bash">sudo apt-get update -y
sudo apt-get upgrade -y</code></pre>
</div>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_actualización_de_plugins">13.2. Actualización de plugins</h3>
<div class="paragraph">
<p>El enlace para gestionar los plugins nos muestra si hay actualizaciones disponibles. Es recomendable actualizar siempre:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/manage-plugins-update.png" alt="Actualizaciones de plugins disponibles">
</div>
</div>
<div class="paragraph">
<p>Entramos y marcamos todos con <em>All</em> , y hacemos clic en <em>Descargar ahora e instalar después de reiniciar</em></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/plugins-update-all.png" alt="Actualizar todos los plugins">
</div>
</div>
<div class="paragraph">
<p>Tras ello, marcamos <em>Reiniciar Jenkins&#8230;&#8203;</em></p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/plugins-restart.png" alt="Reiniciar Jenkins&#8230;&#8203;">
</div>
</div>
</div>
</div>
</div>
<h1 id="_bibliografía" class="sect0">Bibliografía</h1>
<div class="sect1">
<h2 id="_referencias">Referencias</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="https://www.jorgedelacruz.es/2017/02/14/jenkins-2-instalacion-de-jenkins-en-ubuntu/">Jenkins 2 – Instalación de Jenkins en Ubuntu</a></p>
</li>
<li>
<p><a href="https://www.digitalocean.com/community/tutorials/how-to-install-jenkins-on-ubuntu-20-04-es" class="bare">https://www.digitalocean.com/community/tutorials/how-to-install-jenkins-on-ubuntu-20-04-es</a></p>
</li>
<li>
<p><a href="https://www.howtoforge.com/tutorial/how-to-install-jenkins-with-apache-on-ubuntu-16-04/" class="bare">https://www.howtoforge.com/tutorial/how-to-install-jenkins-with-apache-on-ubuntu-16-04/</a></p>
</li>
<li>
<p><a href="https://pkg.jenkins.io/debian-stable/" class="bare">https://pkg.jenkins.io/debian-stable/</a></p>
</li>
<li>
<p><a href="https://www.cloudbooklet.com/how-to-install-jenkins-on-ubuntu-20-04-with-nginx-and-ssl/">How to Install Jenkins on Ubuntu 20.04 with Nginx and SSL</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 3.0<br>
Last updated 2024-02-24 15:54:01 +0100
</div>
</div>
<style>
    .doc .listingblock > .content {
      position: relative;
    }

    .doc .listingblock code[data-lang]::before {
      content: none;
    }

    .doc .source-toolbox {
      display: flex;
      position: absolute;
      visibility: hidden;
      top: 0.25rem;
      right: 0.5rem;
      color: #808080;
      white-space: nowrap;
      font-size: 0.85em;
    }

    .doc .listingblock:hover .source-toolbox {
      visibility: visible;
    }

    .doc .source-toolbox .source-lang {
      font-family: "Droid Sans Mono", "DejaVu Sans Mono", monospace;
      text-transform: uppercase;
      letter-spacing: 0.075em;
    }

    .doc .source-toolbox > :not(:last-child)::after {
      content: "|";
      letter-spacing: 0;
      padding: 0 1ch;
    }

    .doc .source-toolbox .copy-button {
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      background: none;
      border: none;
      color: inherit;
      outline: none;
      padding: 0;
      font-family: inherit;
      font-size: inherit;
      line-height: inherit;
      width: 1em;
      height: 1em;
    }

    .doc .source-toolbox .copy-icon {
      flex: none;
      width: inherit;
      height: inherit;
      filter: invert(50.2%);
      margin-top: 0.05em;
    }

    .doc .source-toolbox .copy-toast {
      flex: none;
      position: relative;
      display: inline-flex;
      justify-content: center;
      margin-top: 1em;
      border-radius: 0.25em;
      padding: 0.5em;
      cursor: auto;
      opacity: 0;
      transition: opacity 0.5s ease 0.75s;
      background: rgba(0, 0, 0, 0.8);
      color: #fff;
    }

    .doc .source-toolbox .copy-toast::after {
      content: "";
      position: absolute;
      top: 0;
      width: 1em;
      height: 1em;
      border: 0.55em solid transparent;
      border-left-color: rgba(0, 0, 0, 0.8);
      transform: rotate(-90deg) translateX(50%) translateY(50%);
      transform-origin: left;
    }

    .doc .source-toolbox .copy-button.clicked .copy-toast {
      opacity: 1;
      transition: none;
    }
    </style>
    <script src="copy-to-clipboard.js"></script>
</body>
</html>